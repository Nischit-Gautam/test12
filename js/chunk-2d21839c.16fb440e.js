(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21839c"],{c9a1:function(t,o,e){"use strict";e.r(o);var i=function(){var t=this,o=t._self._c;return o("div",{staticClass:"all-bookmarks mb-2"},[t.bookmarks.length||t.linkPageLimit?o("bookmark-items",t._b({},"bookmark-items",{bookmarks:t.bookmarks,componentData:t.componentData,bookmarksImagesOnly:t.bookmarksImagesOnly,isLoading:t.isLoading},!1)):t._e(),t.allListLoading?o("div",{staticClass:"d-flex w-100",style:{"margin-top":t.page>1?"-.9rem":""},attrs:{id:"LinkscrollLoaderPublic"}},[o("bookmark-loader",{staticClass:"w-100",attrs:{loaderCount:3}})],1):t._e()],1)},a=[],s=e("2f62"),l={components:{BookmarkItems:()=>e.e("chunk-7b759355").then(e.bind(null,"d8a7")),BookmarkLoader:()=>e.e("chunk-2d228d20").then(e.bind(null,"db8d"))},data(){return{showOutlookEmailLinks:!1,selectAllBookmark:!1,cardView:"list",isLoading:!1,allListLoading:!0,onscrollLoader:!0,linkPageLimit:!1,page:1,componentData:{},fetchingData:!1}},computed:{...Object(s["b"])({bookmarks:"collectionBookmarks",selectedCollection:"selectedCollection",bookmarksImagesOnly:"collectionBookmarksImages",user:"user"})},mounted(){this.$bus.$on("reset-public-bookmarks",()=>{this.$store.commit("SET_COLLECTION_BOOKMARKS",[]),this.$store.commit("SET_COLLECTION_BOOKMARKS_IMAGES",[]),this.page=1,this.linkPageLimit=!1,this.getPublicBookmarks(),this.initializeInterceptor()})},methods:{async getPublicBookmarks(){if(!this.fetchingData){this.fetchingData=!0,this.allListLoading=!0,this.onscrollLoader=!0;try{let t=await this.$store.dispatch("getCollectionBookmarks",{collectionId:this.$route.params.collectionId,type:"public",page:this.page});this.$store.dispatch("getCollectionBookmarksImages",{collectionId:this.$route.params.collectionId,type:"public",page:this.page}),t.length>0?(this.page++,this.onscrollLoader=!1,t.length<10&&this.initializeInterceptor()):(this.linkPageLimit=!0,this.allListLoading=!1)}catch(t){console.error("Error fetching data:",t)}finally{this.fetchingData=!1}}},initializeInterceptor(){let t={root:document.querySelector(".tmf-app"),threshold:.5},o=t=>{t.forEach(t=>{t.isIntersecting&&!this.linkPageLimit&&this.getPublicBookmarks()})},e=new IntersectionObserver(o,t),i=document.querySelector("#LinkscrollLoaderPublic");i&&e.observe(i)}},watch:{"$route.params.collectionId":{immediate:!0,async handler(t){t&&(this.page=1,this.linkPageLimit=!1,this.$store.commit("SET_COLLECTION_BOOKMARKS",[]),this.$store.commit("SET_COLLECTION_BOOKMARKS_IMAGES",[]),await this.getPublicBookmarks(),this.initializeInterceptor())}},selectedCollection:{immediate:!0,deep:!0,handler(t){var o;this.componentData={...this.$bookmarkTypes.publicBookmarks},null!==(o=this.user)&&void 0!==o&&o.isAdmin&&(this.componentData={...this.$bookmarkTypes.publicAdminBookmarks}),this.$nextTick(()=>{this.componentData.header.title=null===t||void 0===t?void 0:t.name})}}},beforeDestroy(){this.$bus.$off("reset-public-bookmarks")}},n=l,r=e("2877"),c=Object(r["a"])(n,i,a,!1,null,null,null);o["default"]=c.exports}}]);