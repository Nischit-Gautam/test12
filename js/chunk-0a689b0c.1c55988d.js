(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a689b0c","chunk-2d0b349c","chunk-2d0b349c","chunk-2d0b349c","chunk-2d0b349c","chunk-2d0b349c","chunk-2d0b349c","chunk-2d0b349c","chunk-2d0b349c","chunk-2d0b349c","chunk-2d0b349c","chunk-2d0b349c","chunk-2d0b349c"],{"05d6":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-3 add-bookmark-page",class:t.getQrUiTypeClass},[t.isLoading?e("div",{staticClass:"d-flex align-items-center justify-content-center",staticStyle:{width:"100%",height:"100%"}},[e("loader")],1):e("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[e("div",{staticClass:"d-flex justify-content-center"},[e("ViewQr",{attrs:{qrCode:t.linkQrImage}})],1),e("div",{staticClass:"add-bookmark-link"},[t._v(" "+t._s(t.formData.path)+" ")]),e("div",{staticClass:"add-bookmark-loader-wrapper"},[t.messgeLoader?e("span",{staticClass:"loader-control sm"}):t._e(),e("span",{domProps:{innerHTML:t._s(t.loadingMessage)}})]),t.checkForUiType?e("div",[e("TmfInput",{staticClass:"w-100 add-link--input",attrs:{formAttributes:{type:"text",label:"Link *",name:"Path",required:!0,autocomplete:"off",autofill:"off"},formErrors:t.formErrors,value:t.formData.path,isLoading:t.checkingForLink},on:{"update:value":function(e){return t.$set(t.formData,"path",e)},change:function(e){return t.checkForPath(e)},input:function(e){t.disableButton=!0}}},[e("div",{directives:[{name:"tmf-tooltip",rawName:"v-tmf-tooltip",value:{content:"Link image"},expression:"{ content: 'Link image' }"}],staticClass:"image-wrapper border-right",staticStyle:{height:"1.6em",width:"1.6em"},attrs:{slot:"prepend"},slot:"prepend"},[e("img",{attrs:{src:"data:image;base64, "+t.formData.icon,alt:"link icon"}})])]),e("TmfInput",{attrs:{formAttributes:{type:"text",label:"Title *",name:"Title",required:!0,autocomplete:"off",autofill:"off",maxlength:250},formErrors:t.formErrors,value:t.formData.title},on:{"update:value":function(e){return t.$set(t.formData,"title",e)}}}),e("input-wrapper",{attrs:{error:t.$helper.getInputError(t.formErrors,"categoryID")}},[e("multi-select",{attrs:{label:"Collection *",name:"collection",options:t.collections,selectCollectionMode:""},on:{collectionLoading:function(e){t.disableButton=e}},model:{value:t.selectedCategoryId,callback:function(e){t.selectedCategoryId=e},expression:"selectedCategoryId"}})],1),e("MultiSelectTags",{staticClass:"pt-3",attrs:{label:"Tags",name:"tag",trackName:"tagID",multiple:"",filter:"isDeleted",multiselectTag:"",trackerId:"bookmark-select-tag"},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}}),e("TmfTextarea",{attrs:{formAttributes:{rows:"3",label:"Description",maxlength:"250",name:"Description"},formErrors:t.formErrors,value:t.formData.description},on:{"update:value":function(e){return t.$set(t.formData,"description",e)}}}),e("div",{staticClass:"d-flex justify-content-end"},[e("button",{staticClass:"btn-control md light",attrs:{type:"button",disabled:t.buttonIsLoading},on:{click:function(e){return t.closeWindow()}}},[t._v(" Close ")]),e("button",{staticClass:"btn-control md primary",attrs:{type:"submit",disabled:t.buttonIsLoading||t.duplicateLink||t.isButtonDisable}},[t.buttonIsLoading?e("div",{staticClass:"loader"}):t._e(),t._v(" Submit ")])])],1):t._e()]),t.isLoading||t.isAuthenticated?t._e():e("div",{staticClass:"add-bookmark-login-form"},[e("login-form",{on:{userIsLoggedIn:function(e){return t.userIsLoggedIn()}}})],1)])},a=[],o=(i("14d9"),i("2f62"));function n(){return{formData:{title:"",icon:"",path:"",description:""},isLoading:!1,buttonIsLoading:!1,duplicateLink:!1,selectedCategoryId:null,checkingForLink:!1,disableButton:!0,formErrors:{},linkQrImage:"",loadingMessage:"Checking Link...",messgeLoader:!0,path:null,selectedTags:[],tags:[]}}var r={components:{LoginForm:()=>i.e("chunk-f264ecf2").then(i.bind(null,"a55b")),Loader:()=>i.e("chunk-a8f291f8").then(i.bind(null,"845c")),ViewQr:()=>i.e("chunk-527de949").then(i.bind(null,"158a")),MultiSelectTags:()=>i.e("chunk-ad8b2f58").then(i.bind(null,"e916"))},data:()=>n(),async created(){this.isLoading=!0,await this.$store.commit("SET_ADD_BOOKMARK_MODE",!0);try{await this.$axios.get("/user/me")}catch(t){401===t.status&&window.resizeTo(400,650)}finally{this.isLoading=!1}},computed:{...Object(o["b"])(["addBookmarkMode","isAuthenticated","settings","collections"]),isButtonDisable(){var t;return this.disableButton||!(null!==(t=this.formData)&&void 0!==t&&t.path&&this.selectedCategoryId)},checkForUiType(){var t;return 1===(null===(t=this.settings)||void 0===t?void 0:t.uiTypeId)},getQrUiTypeClass(){var t,e;return 1===(null===(t=this.settings)||void 0===t?void 0:t.uiTypeId)?"full-form":2===(null===(e=this.settings)||void 0===e?void 0:e.uiTypeId)?"only-qr":"direct-save"}},methods:{async getTags(){this.tags=await this.$store.dispatch("getTags")},async addTag(t){let e=[];return this.selectedTags.forEach(t=>e.push(t.tagID)),!e.length>0||(await this.$axios.post("/tag/AddToBookmark/"+t.id,JSON.stringify(e)),t.tags=[...this.selectedTags]),t},async initilize(){try{var t,e;if(Object.assign(this.$data,n()),this.isLoading=!0,this.path=encodeURI(this.$route.query.url),this.formData={path:this.path,icon:""},this.modal=!0,await this.getSettings(),3!==(null===(t=this.settings)||void 0===t?void 0:t.uiTypeId)){let t=await this.$axios.get("/bookmark/qr?text="+this.formData.path);this.linkQrImage="data:image;base64,"+t.data}1===(null===(e=this.settings)||void 0===e?void 0:e.uiTypeId)?(this.getTags(),await this.$store.dispatch("getCollections"),this.selectedCategoryId=this.settings.defaultChromeCategory):(await this.checkForPath(this.formData.path),this.selectedCategoryId=this.settings.defaultChromeCategory,this.duplicateLink||this.submit())}finally{this.isLoading=!1}},async submit(){try{var t,e;this.buttonIsLoading=!0,this.loadingMessage="Saving link...",this.formData.categoryID=this.selectedCategoryId;let i=await this.$axios.post("/bookmark",this.formData);await this.addTag(i.data),this.loadingMessage=`<div style="color:green"><span>${this.$internalIcons.checkmark}</span> Link saved successfully</div>`,1===(null===(t=this.settings)||void 0===t?void 0:t.uiTypeId)&&(this.$bus.$emit("open-toaster","Link added","success"),setTimeout(()=>{this.closeWindow()},2e3)),3===(null===(e=this.settings)||void 0===e?void 0:e.uiTypeId)&&setTimeout(()=>{this.closeWindow()},1e3)}catch(i){400===i.status&&(this.formErrors=JSON.parse(i.response)["errors"],this.loadingMessage="Error saving link")}finally{this.buttonIsLoading=!1,this.messgeLoader=!1}},async checkForPath(t,e){try{var i,s,a;if(null===t||void 0===t||!t.length)return;this.formErrors={},this.disableButton=!0,this.checkingForLink=!0,this.closeOnBackdrop=!1;let o=this.selectedCategoryId||this.settings.defaultChromeCategory,n=await this.$axios.post("/bookmark/fetch/"+o,JSON.stringify(t));e||(this.formData.title=null===(i=n.data)||void 0===i||null===(i=i.title)||void 0===i?void 0:i.trim()),this.formData.description=null===(s=n.data)||void 0===s||null===(s=s.description)||void 0===s?void 0:s.trim(),this.formData.icon=n.data.icon,null!==(a=this.formData)&&void 0!==a&&null!==(a=a.icon)&&void 0!==a&&a.length||(this.formData.icon="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"),this.formData.path=n.data.path.trim(),this.duplicateLink=n.data.isDublicate}catch(o){409===o.status&&(this.duplicateLink=!0)}finally{this.checkingForLink=!1,this.closeOnBackdrop=!0,this.disableButton=!1,this.duplicateLink&&(this.loadingMessage="Unable to save the link, Link is already present",this.messgeLoader=!1,this.formErrors={Path:["Duplicate link"]})}},async getSettings(){var t;await this.$store.dispatch("getSettings"),1===(null===(t=this.settings)||void 0===t?void 0:t.uiTypeId)&&window.resizeTo(400,650)},closeWindow(){window.close()}},watch:{isAuthenticated:{immediate:!0,handler(t){t&&(this.$store.commit("SET_ADD_BOOKMARK_MODE",!1),this.initilize())}},selectedCategoryId:{immediate:!0,handler(t){t&&this.checkForPath(this.path)}}}},l=r,d=(i("0603"),i("2877")),c=Object(d["a"])(l,s,a,!1,null,null,null);e["default"]=c.exports},"0603":function(t,e,i){"use strict";i("9629")},2877:function(t,e,i){"use strict";function s(t,e,i,s,a,o,n,r){var l,d="function"===typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=i,d._compiled=!0),s&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),n?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},d._ssrRegister=l):a&&(l=r?function(){a.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(t,e){return l.call(e),c(t,e)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:d}}i.d(e,"a",(function(){return s}))},9629:function(t,e,i){}}]);