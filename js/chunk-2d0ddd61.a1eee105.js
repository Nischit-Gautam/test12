(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ddd61"],{"82a2":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("button",{directives:[{name:"tmf-tooltip",rawName:"v-tmf-tooltip",value:{content:"Save all tab session"},expression:"{\n    content: 'Save all tab session'\n  }"}],staticClass:"btn-control icon sq md ml-2 secondary",attrs:{disabled:!Object.keys(t.currentTab).length>0},on:{click:function(e){return e.stopPropagation(),t.getAllTabs.apply(null,arguments)}}},[t.isLoading?e("div",{staticClass:"loader"}):e("span",{domProps:{innerHTML:t._s(t.$internalIcons.saveTabs)}})])},o=[],i=(s("14d9"),s("2f62")),r={data(){return{isLoading:!1,allTabs:[],browserCategory:{},browserCurrentSessionCategory:{}}},computed:{...Object(i["b"])(["extensionId","currentTab","settings"]),browserSessionCategory(){return{id:this.settings.defaultBrowserSession}}},methods:{async getAllTabs(){var t;if(!this.extensionId)return;if(await this.$store.dispatch("getSettings"),await this.getBrowserCategoryData(),null===(t=this.settings)||void 0===t||!t.defaultBrowserSession)return void this.$bus.$emit("dialog-open","Extension default collection is not set. <br/> Please set the Extension default collection in settings to continue adding browser tabs session");this.isLoading=!0;let e=this;window.chrome.windows.getCurrent((function(t){window.chrome.windows.get(t.id,{populate:!0},(async function(t){let s=[...t.tabs],a=[];if(s){if(!s)return;s.forEach(t=>{let e=encodeURI(t.url);a.push(e)});let t=await e.$axios.post("bookmark/Bookmark-Array",a);e.allTabs=t.data,await e.bookmarkAllTab()}}))}))},async getBrowserCategoryData(){let t=this.$helper.getBrowserType().browserName;try{var e;let a=await this.$axios.get("/category/search?query="+t);if(null===(e=a.data)||void 0===e||!e.some(t=>t.parentID===this.browserSessionCategory.id))throw{status:404};var s;null===a||void 0===a||null===(s=a.data)||void 0===s||s.forEach(t=>{t.parentID===this.browserSessionCategory.id&&(this.browserCategory={...t})})}catch(a){if(404===a.status){let e="Collection for"+t;try{await this.postCategory(t,this.$internalIcons[""+t.toLowerCase()],e,"browserCategory",this.browserSessionCategory.id)}catch(a){if(409===a.status){let s=`${t}_${this.getUniqueDate().categoryName}`;await this.postCategory(s,this.$internalIcons[""+t.toLowerCase()],e,"browserCategory",this.browserSessionCategory.id)}}}}finally{await this.$store.dispatch("getCollections")}},async postCategory(t,e,s,a,o){let i={name:t,icon:e,description:s};o&&(i.parentId=o);let r=await this.$axios.post("/category",i);this.$data[""+a]=r.data},getUniqueDate(){const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let e=new Date,s=this.checkDate(e.getDate())+t[e.getMonth()]+e.getFullYear()+"_"+e.getHours()+this.checkDate(e.getMinutes())+this.checkDate(e.getSeconds()),a="Browsers tabs session on date: "+this.checkDate(e.getDate())+"-"+t[e.getMonth()]+"-"+e.getFullYear();return{categoryName:s,description:a}},checkDate(t){return t<10?"0"+t:t},async bookmarkAllTab(){if(!this.allTabs.length)return this.$bus.$emit("open-toaster","All tabs are already present from this account"),void(this.isLoading=!1);try{let{categoryName:t,description:e}=this.getUniqueDate();await this.postCategory(t,this.$internalIcons.folder,e,"browserCurrentSessionCategory",this.browserCategory.id);let s=[];this.allTabs.forEach(t=>{s.push({path:t,categoryId:this.browserCurrentSessionCategory.id})});let a=await this.$axios.post("/bookmark/multiple",s);this.allTabs=[],await this.$store.dispatch("getCollections"),this.$route.params.collectionId==this.browserCurrentSessionCategory.id&&this.$helper.setState("addMultiple","SET_COLLECTION_BOOKMARKS","collectionBookmarks",a.data,null,"SET_COLLECTION_BOOKMARKS_IMAGES","collectionBookmarksImages"),this.$bus.$emit("open-toaster","Session tabs added")}catch(t){this.$bus.$emit("open-toaster","Error saving session tabs"),await this.$axios.delete("/category/"+this.browserCurrentSessionCategory.id)}finally{this.isLoading=!1,this.$store.commit("SET_CURRENT_TAB",{...this.currentTab,isDublicate:!1})}}}},n=r,l=s("2877"),c=Object(l["a"])(n,a,o,!1,null,null,null);e["default"]=c.exports}}]);