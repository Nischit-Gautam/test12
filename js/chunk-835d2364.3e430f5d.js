(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-835d2364"],{"834b":function(o,t,i){"use strict";t["a"]={methods:{draggableToaster(o,t,i="copy"){const e=(null===o||void 0===o?void 0:o.length)||0,l=(null===t||void 0===t?void 0:t.length)||0,a=e>1,s=e-l,n="copy"===i?"copied":"moved";let r="",d="";a?0===s?(r=`${l} Links ${n} successfully`,d="success"):s>0&&0!==l?(r=`${l} Links ${n} successfully! \n              <small>Unable to ${i} ${s} \n              Link${s>1?"s":""}</small>`,d="success"):0===l&&(r=`Failed to ${i} Links. <small>Duplicate links detected</small>`,d="error"):1===l?(r=`${l} Link ${n} successfully`,d="success"):0===l&&(r=`Failed to ${i} Link. <small>Duplicate link detected</small>`,d="error"),this.$bus.$emit("open-toaster",r,d)}}}},9998:function(o,t,i){"use strict";i.r(t);var e=function(){var o=this,t=o._self._c;return o.modal?t("ModalContainer",o._b({staticClass:"draggable-modal",attrs:{modal:o.modal},on:{"update:modal":function(t){o.modal=t}}},"ModalContainer",{modalData:o.modalData},!1),[t("div",{staticClass:"draggable__body",attrs:{slot:"body"},slot:"body"},[o.$permissionHelper.checkPermission({permissionName:"bookmarkDragMove",collection:o.currentCollection})?t("div",{staticClass:"draggable__body__item",on:{click:function(t){return o.submit("move")}}},[t("div",{staticClass:"draggable__body__item__icon-wrapper"},[t("span",{staticClass:"draggable__body__item__icon",domProps:{innerHTML:o._s(o.$internalIcons.moveItem)}})]),t("div",{staticClass:"draggable__body__item__title"},[o._v("Move to collection")])]):o._e(),t("div",{staticClass:"draggable__body__item",on:{click:function(t){return o.submit("copy")}}},[t("div",{staticClass:"draggable__body__item__icon-wrapper"},[t("span",{staticClass:"draggable__body__item__icon",domProps:{innerHTML:o._s(o.$internalIcons.copyItem)}})]),t("div",{staticClass:"draggable__body__item__title"},[o._v("Make a copy")])])])]):o._e()},l=[],a=i("ff46");function s(){return{modal:!1,bookmark:"",draggedFrom:{},isMultiple:!1,collection:{},path:"",isOrganization:!1,modalData:{title:"Choose how you want to drop the links",icon:"dragItem",hideButton:!0},currentCollection:{}}}var n={mixins:[a["a"]],data:()=>s(),mounted(){this.$bus.$on("open-draggable-form",o=>{this.initilize(o)})},methods:{initilize(o){var t,i;Object.assign(this.$data,s()),this.bookmark=null===o||void 0===o?void 0:o.bookmark,this.currentCollection=null===o||void 0===o?void 0:o.collection,this.draggedFrom=null===o||void 0===o||null===(t=o.bookmark)||void 0===t?void 0:t.draggedFrom,this.isMultiple=null===o||void 0===o||null===(i=o.bookmark)||void 0===i?void 0:i.isMultiple,this.collection=null===o||void 0===o?void 0:o.collection,this.path=null===o||void 0===o?void 0:o.path,this.isOrganization=null===o||void 0===o?void 0:o.publicCollection,this.modal=!0},async submit(o){this.modal=!1;let t=this.isMultiple?this.bookmark.data:[this.bookmark.id];await this.moveCopy({type:o,collection:this.collection,isMultiple:this.isMultiple,data:t,draggedFrom:this.draggedFrom})}},beforeDestroy(){this.$bus.$off("open-draggable-form")}},r=n,d=i("2877"),c=Object(d["a"])(r,e,l,!1,null,null,null);t["default"]=c.exports},ff46:function(o,t,i){"use strict";i("14d9"),i("13d5");var e=i("834b"),l=i("2f62");t["a"]={mixins:[e["a"]],computed:{...Object(l["b"])(["collectionBookmarks"])},methods:{async moveCopy({type:o,collection:t,isMultiple:i,data:e,draggedFrom:l}){try{var a;this.$bus.$emit("open-toaster",""+("move"===o?"Moving Links...":"Copying Links..."),"loader");let s=1,n=await this.$axios.post(`/bookmark/${t.id}/${o}/BulkAction`,JSON.stringify(e));i&&(s=e.length,this.$bus.$emit("reset-selected-bookmarks")),s=null===(a=n.data)||void 0===a?void 0:a.length,"move"===o&&this.moveCollection({isMultiple:i,data:e,bookmarkCount:s,draggedFrom:l,response:n}),t.bookmarkCount+=s,this.$collectionHelper.mapCollection({collection:t,componentData:this.$collectionHelper.getNavItemComponentData(t),type:"update"});let r=n.data;this.draggableToaster(e,r,o)}catch(s){this.$bus.$emit("open-toaster","move"===o?"Error moving Links":"Error copying Links","error"),406===s.status&&this.$bus.$emit("open-subscription-limit")}finally{this.$bus.$emit("reset-selected-bookmarks")}},moveCollection({isMultiple:o,data:t,bookmarkCount:i,draggedFrom:e,response:l}){t=t.reduce((o,t)=>{var i;return null!==(i=l.data)&&void 0!==i&&i.some(o=>o.id===t)&&o.push(t),o},[]);let a=this.collectionBookmarks.filter(i=>{var e;return o?!(null!==(e=t)&&void 0!==e&&e.includes(i.id)):t[0]!==i.id});e.bookmarkCount-=i,this.$collectionHelper.mapCollection({collection:e,componentData:this.$collectionHelper.getNavItemComponentData(e),type:"update"}),this.$store.commit("SET_COLLECTION_BOOKMARKS",a)}}}}}]);