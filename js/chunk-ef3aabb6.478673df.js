(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef3aabb6"],{8672:function(t,e,s){},"95c3":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return t.modal?e("ModalContainer",t._b({staticClass:"share-form manage-teams-form",attrs:{modal:t.modal},on:{update:function(e){t.formData={}},"update:modal":function(e){t.modal=e}}},"ModalContainer",{modalData:t.modalData,isButtonDisable:t.isButtonLoading,isButtonLoading:t.isButtonLoading},!1),[e("template",{slot:"body"},[e("div",{staticClass:"share-form__collection-title-container"},[e("span",{staticClass:"share-form__collection-icon",domProps:{innerHTML:t._s(t.collection.icon)}}),e("span",{staticClass:"share-form__collection-title"},[t._v(t._s(t.collection.name))])]),e("form",{staticClass:"d-flex flex-column mb-0",on:{submit:function(e){return e.preventDefault(),t.submit()}}},[e("div",{staticClass:"manage-teams-form__title"},[t._v(" Shared Teams "),e("small",[t._v("("+t._s(t.selectedTeamsCount)+"/"+t._s(t.totalTeamsCount)+")")])]),e("ul",{staticClass:"manage-teams-form__form-container pl-0 scroll-vertical"},[e("transition-group",{attrs:{name:"list"}},[t._l(t.filteredOptions,(function(s,o){return[e("li",{key:s.shareWithID,on:{click:function(e){return e.stopPropagation(),t.listHandler(s)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOptionsId,expression:"selectedOptionsId"}],attrs:{type:"checkbox",name:`${s.sharedWithName}-${o}`},domProps:{value:s.shareWithID,checked:Array.isArray(t.selectedOptionsId)?t._i(t.selectedOptionsId,s.shareWithID)>-1:t.selectedOptionsId},on:{change:function(e){var o=t.selectedOptionsId,a=e.target,i=!!a.checked;if(Array.isArray(o)){var n=s.shareWithID,l=t._i(o,n);a.checked?l<0&&(t.selectedOptionsId=o.concat([n])):l>-1&&(t.selectedOptionsId=o.slice(0,l).concat(o.slice(l+1)))}else t.selectedOptionsId=i}}}),e("label",{attrs:{for:`${s.sharedWithName}-${o}`}},[e("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(s.teamName))]),s.sharedWithName?e("span",[t._v(" : "+t._s(s.sharedWithName))]):t._e()])])]}))],2)],1),e("div",{staticClass:"tmf-modal__footer"},[e("button",{staticClass:"btn-control light md",attrs:{disabled:t.isButtonLoading},on:{click:t.closeModal}},[t._v(" Cancel ")]),e("button",{staticClass:"btn-control primary md tmf-modal__footer__button-save",class:t.isButtonLoading?"is-loading":"",attrs:{type:"submit",disabled:t.isButtonLoading}},[t.isButtonLoading?e("div",{staticClass:"tmf-modal__footer__button-loader"},t._l(6,(function(t){return e("span",{key:t})})),0):t._e(),e("span",[t._v("Save")])])])])])],2):t._e()},a=[];s("14d9");function i(){return{modal:!1,isButtonLoading:!1,formData:{teams:[]},modalData:{title:"Manage Teams Share",icon:"teamsIcon",hideButton:!0},collection:{},sharedTeams:[],selectedOptions:[],selectedOptionsId:[],componentData:{}}}var n={data:()=>i(),computed:{selectedTeamsCount(){return this.selectedOptionsId.length},totalTeamsCount(){var t;return(null===(t=this.sharedTeams)||void 0===t?void 0:t.length)||0},filteredOptions(){let t=this.sharedTeams;return null===t||void 0===t?void 0:t.sort((t,e)=>this.selectedOptionsId.includes(null===t||void 0===t?void 0:t.shareWithID)&&!this.selectedOptionsId.includes(null===e||void 0===e?void 0:e.shareWithID)?-1:!this.selectedOptionsId.includes(null===t||void 0===t?void 0:t.shareWithID)&&this.selectedOptionsId.includes(null===e||void 0===e?void 0:e.shareWithID)?1:0)}},mounted(){this.$bus.$on("open-manage-teams-form",t=>{var e;Object.assign(this.$data,i()),this.componentData={...t.componentData},this.collection={...t.collection},this.sharedTeams=null===(e=this.collection)||void 0===e||null===(e=e.sharedTeams)||void 0===e?void 0:e.filter(t=>null!==t.shareWithID),this.modal=!0})},methods:{async submit(){try{if(this.isButtonLoading=!0,0===this.selectedOptionsId.length)return;this.formData.teams=this.selectedOptionsId;let t=await this.$axios.post("/share/unshare-teams/"+this.collection.id,JSON.stringify(this.formData.teams));this.$collectionHelper.mapCollection({collection:t.data,componentData:this.componentData,type:"update"}),this.$bus.$emit("open-toaster",`<strong>${this.collection.name}</strong> removed from teams.`,"success"),this.modal=!1}catch{this.$bus.$emit("open-toaster",`Error removing teams from collection<strong>${this.collection.name}</strong>`,"error")}finally{this.isButtonLoading=!1}},listHandler(t){var e;const s=t.shareWithID;var o;null!==(e=this.selectedOptions)&&void 0!==e&&e.some(t=>t.shareWithID===s)?null!==(o=this.selectedOptionsId)&&void 0!==o&&o.includes(s)?this.selectedOptionsId=this.selectedOptionsId.filter(t=>t!==s):this.selectedOptionsId.push(s):(this.selectedOptions.push(t),this.selectedOptionsId.push(s))},closeModal(){this.isButtonLoading||(this.modal=!1)}},beforeDestroy(){this.$bus.$off("open-manage-teams-form")}},l=n,d=(s("b443"),s("2877")),r=Object(d["a"])(l,o,a,!1,null,null,null);e["default"]=r.exports},b443:function(t,e,s){"use strict";s("8672")}}]);