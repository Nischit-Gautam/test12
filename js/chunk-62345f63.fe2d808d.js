(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62345f63"],{"7a66":function(e,t,s){},e916:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{key:e.componentKey,staticClass:"d-flex flex-column select-control",class:[e.nomargin?"":"mb-3",e.disabled?"select-is-disabled":""]},[e.label?t("label",{attrs:{for:e.name}},[e._v(e._s(e.label))]):e._e(),t("TmfDropdown",{staticClass:"w-100 multi-select-dropdown",attrs:{disabled:e.disabled,show:e.showMultiselectDropdown,menuPosition:"bottom",dropdownComponentKey:e.dropdownComponentKey,trackerId:e.trackerId},on:{"update:show":function(t){e.showMultiselectDropdown=t}}},[t("template",{slot:"header"},[t("TmfInput",{attrs:{formAttributes:{type:"text",name:"Name",autocomplete:"off",autofill:"off",disabled:e.disabled,maxLength:e.maxLength,placeholder:"Search a "+e.name,disableName:!0},formErrors:e.formErrors,value:e.search},on:{"update:value":function(t){e.search=t},keypressEnterPrevent:function(t){return e.addNewTag(t)}}})],1),e._l(e.filterdOptions,(function(s,i){return[e.selectedIds.includes(s[e.trackName])?e._e():t("div",{key:i,staticClass:"multiselect-dropdown__item",on:{click:function(t){return e.selectOption(s)}}},[t("div",{staticClass:"multiselect-dropdown__item__name"},[e._v(" "+e._s(s.name)+" ")])])]})),e.filterdOptions.length||e.isLoading?e._e():t("div",{staticClass:"multiselect-dropdown__notfound"},[e.multiselectTag?t("span",{staticClass:"d-flex align-items-center justify-content-between message"},[e._v(" Tag not found! "),t("small",{staticClass:"light"},[e._v("Press enter to create this tag.")])]):t("span",[e._v("no content.")])]),e.isLoading?t("div",e._l(3,(function(e){return t("div",{key:"tag-"+e,staticClass:"d-flex mb-1 p-1"},[t("div",{staticClass:"skeletion-loader mr-2",style:{width:Math.floor(50*Math.random()+30)+"%",height:"15px","border-radius":"2px"}}),t("div",{staticClass:"skeletion-loader light",staticStyle:{width:"15px",height:"15px","border-radius":"2px"}})])})),0):e._e(),""==e.search?t("div",{directives:[{name:"trigger-observer",rawName:"v-trigger-observer"}],attrs:{id:"TagscrollLoaderModel"}},e._l(3,(function(e){return t("div",{key:"tag-"+e,staticClass:"d-flex mb-1 p-1"},[t("div",{staticClass:"skeletion-loader mr-2",style:{width:Math.floor(50*Math.random()+30)+"%",height:"15px","border-radius":"2px"}}),t("div",{staticClass:"skeletion-loader light",staticStyle:{width:"15px",height:"15px","border-radius":"2px"}})])})),0):e._e()],2),e.selected.length?t("div",{staticClass:"selected-options"},[e._l(e.selected,(function(s,i){return[t("span",{directives:[{name:"tmf-tooltip",rawName:"v-tmf-tooltip",value:{content:s[e.trackBy]},expression:"{ content: select[trackBy] }"}],key:i,staticClass:"d-flex align-items-center justify-content-center selected-options--item"},[t("span",[e._v(e._s(s[e.trackBy]))]),t("span",{staticClass:"selected-option-close align-items-center justify-content-center rotate-icon-45-deg",domProps:{innerHTML:e._s(e.$internalIcons.plusBold)},on:{click:function(t){return e.removeOption(i)}}})])]}))],2):e._e()],1)},r=[],a=(s("14d9"),s("13d5"),s("d7a6")),l={props:{label:{type:String,required:!1,default:"label"},name:{type:String,required:!1,default:""},trackName:{type:String,required:!1,default:"id"},multiple:{type:Boolean,required:!1,default:!1},filter:{type:String,required:!1,default:""},multiselectTag:{type:Boolean,required:!1,default:!1},trackerId:{type:String,required:!1,default:""},trackBy:{type:String,required:!1,default:"name"},value:{type:[Array,Number],required:!1},nomargin:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},maxLength:{type:Number,required:!1,default:200},selectedOption:{type:Object,required:!1,default:()=>({})}},directives:{"trigger-observer":{inserted(e,t,s){s.context.initializeInterceptor()}}},data(){return{selected:[],search:"",singleSelected:null,sigleSelectNamsingleSelectede:"",currentOptions:[],currentChilds:[],componentKey:0,collectionIsLoading:!1,showMultiselectDropdown:!1,formErrors:{},dropdownComponentKey:0,observer:null,searchedTags:[],isLoading:!1,debounceTimer:null}},async mounted(){await this.getTags()},beforeDestroy(){this.disconnectObserver()},computed:{...Object(a["mapGetters"])(["tags"]),filterdOptions(){return this.tags.length&&""===this.search?this.tags.filter(e=>{if(void 0!==e[this.trackBy])return e[this.trackBy].toLowerCase().includes(this.search.toLowerCase())}).filter(e=>!this.filter||!e[this.filter]):""!==this.search?this.searchedTags:[]},selectedIds(){let e=[];return this.selected.forEach(t=>{e.push(t[this.trackName])}),e}},methods:{async getTags(){await this.$store.dispatch("getTags",this.$store.getters.page)},removeOption(e){this.selected.splice(e,1),this.$emit("input",this.selected)},selectOption(e){var t;if(null!==(t=e)&&void 0!==t&&t.remove){let t=e.path.split(".");if(t.length>2){let s=this.currentOptions[t[0]];t.pop(),t.shift();let i=t.join("."),r=(e,t)=>t.split(".").reduce((e,t)=>e.childrens[t],e);e=r(s,i)}else 2===t.length?e=this.currentOptions[t[0]]:1===t.length&&(this.currentOptions=this.resetOptions(this.currentOptions),this.currentChilds=this.currentOptions,this.componentKey++,e={});delete e.remove}let s=e;this.multiple?this.selected=[...this.selected,e]:e?(this.sigleSelectName=e[this.trackBy],this.singleSelected=e[this.trackName]):(this.singleSelected=null,this.singleSelectedName=""),this.$emit("input",this.multiple?this.selected:this.singleSelected),this.$emit("selectedOption",this.multiple?[]:s)},resetOptions(e){return e.map(e=>(e.isOpen=!1,e.isSelected=!1,delete e.remove,e.hasChildren&&null!==e&&void 0!==e&&e.childrens&&e.childrens.length&&this.resetOptions(e.childrens),e))},searchForSelected(e,t){e.some((e,s)=>{e.path=""+s,e.id!=t||this.selectOption(e)})},async addNewTag(e){try{let t=e.target.value.trim();if(e.target.value=t,!t)return;if(this.multiselectTag){let s=[];if(this.tags.forEach(e=>{s.push(e.name)}),s.includes(t))this.$bus.$emit("open-toaster",`Tag <b>#${t}</b> already added`);else if(1==this.filterdOptions.length&&this.filterdOptions[0].name===t)this.selectOption(this.filterdOptions[0]);else{let e=await this.$axios.post("/tag",{name:t,isPrivate:!0});this.tags.push(e.data),this.selectOption(e.data),this.search="",this.$bus.$emit("open-toaster",`Tag <b>#${t}</b> added`)}e.target.blur(),this.showMultiselectDropdown=!1}}catch(t){400===t.status&&(this.formErrors=JSON.parse(t.response)["errors"])}},initializeInterceptor(){let e={threshold:.5},t=e=>{e.forEach(e=>{e.isIntersecting&&this.getAdditionalTags()})};this.observer=new IntersectionObserver(t,e);let s=document.querySelector("#TagscrollLoaderModel");s&&this.observer.observe(s)},disconnectObserver(){this.observer&&this.observer.disconnect()},async getAdditionalTags(){var e=await this.$store.dispatch("getTags",this.$store.getters.page);e.length<30&&(document.querySelector("#TagscrollLoaderModel").style.display="none")},async searchTagsDebounced(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.fetchSearchedTags()},1e3)},async fetchSearchedTags(){try{const e=await this.$axios.get("Tag/search?searchKey="+this.search);this.searchedTags=e.data}catch(e){console.error("Error fetching filtered tags:",e),this.searchedTags=[]}finally{this.isLoading=!1}}},watch:{value:{immediate:!0,deep:!0,handler(e){this.multiple?this.selected=e:(this.singleSelected!=e&&this.searchForSelected(this.tags,e),this.singleSelected=e,this.currentOptions.forEach(t=>{t[this.trackName]===e&&(this.sigleSelectName=t[this.trackBy])}))}},search:{immediate:!0,handler(e){""!==e&&(this.isLoading=!0,this.searchTagsDebounced())}},selectedOption:{immediate:!0,deep:!0,handler(e){Object.keys(e).length&&this.selectOption(e)}}}},n=l,o=(s("f706"),s("2877")),d=Object(o["a"])(n,i,r,!1,null,null,null);t["default"]=d.exports},f706:function(e,t,s){"use strict";s("7a66")}}]);