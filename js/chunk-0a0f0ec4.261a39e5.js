(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a0f0ec4"],{"23c2":function(e,t,i){"use strict";i("b0ef")},b0ef:function(e,t,i){},cd58:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tmf-dropdown-select"},[t("TmfDropdown",{staticClass:"w-100",attrs:{menuPosition:"bottom"}},[t("template",{slot:"header"},[t("small",{staticClass:"tmf-input__note"},[e._v("* Enter initial 3 letters to search.")]),t("TmfInput",{staticClass:"mb-0 tmf-input__only-input",attrs:{value:e.search,formAttributes:{type:"text",placeholder:"Search for "+e.dropdownData.name,name:"Search",autocomplete:"off",autofill:"off"}},on:{"update:value":function(t){e.search=t}}},[t("template",{slot:"append"},[t("span",{staticClass:"rotate-icon-45-deg",domProps:{innerHTML:e._s(e.$internalIcons.plus)},on:{click:function(t){e.search=""}}})])],2)],1),e._l(e.filteredSearchedOptions,(function(i){return[t("div",{key:i[e.dropdownData.id],on:{click:function(t){return e.listHandler(i,"clearSearch")}}},[t(e.dropdownData.component,e._b({tag:"component"},"component",{optionData:i},!1))],1)]})),e.isSearchingOption?t("div",{staticClass:"d-flex align-items-center justify-content-center"},[t("TmfSpinner")],1):e._e(),e.isSearchingOption||e.filteredSearchedOptions.length?e._e():t("div",{staticClass:"tmf-dropdown-select__not-found"},[e._v(" "+e._s(e.dropdownData.name)+" not found ")])],2),t("div",{staticClass:"share-form__selected_items"},[t("transition-group",{attrs:{name:"list"}},[e._l(e.filteredSelectedOptions,(function(i){return[t("div",{key:i[e.dropdownData.id],staticClass:"share-form__selected_items__item",class:e.selectedOptionsId.includes(i[e.dropdownData.id])?"share-form__selected_items__item--selected":"",on:{click:function(t){return t.stopPropagation(),e.listHandler(i)}}},[t("div",{staticClass:"share-form__selected_items__item__checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedOptionsId,expression:"selectedOptionsId"}],attrs:{type:"checkbox"},domProps:{value:i[e.dropdownData.id],checked:Array.isArray(e.selectedOptionsId)?e._i(e.selectedOptionsId,i[e.dropdownData.id])>-1:e.selectedOptionsId},on:{change:function(t){var s=e.selectedOptionsId,o=t.target,n=!!o.checked;if(Array.isArray(s)){var d=i[e.dropdownData.id],a=e._i(s,d);o.checked?a<0&&(e.selectedOptionsId=s.concat([d])):a>-1&&(e.selectedOptionsId=s.slice(0,a).concat(s.slice(a+1)))}else e.selectedOptionsId=n}}})]),t("div",{staticClass:"share-form__selected_items__item__name"},[t(e.dropdownData.component,e._b({tag:"component"},"component",{optionData:i},!1))],1),t("span",{staticClass:"share-form__selected_items__item__close rotate-icon-45-deg",domProps:{innerHTML:e._s(e.$internalIcons.plus)},on:{click:function(t){return t.stopPropagation(),e.listHandler(i,"removeOption")}}})])]})),e.isLoading?t("div",{key:"laoder-1"},[e._l(2,(function(e){return[t("div",{key:"laoder-"+e,staticClass:"skeletion-loader dark",staticStyle:{height:"1.3rem","margin-bottom":"3px","border-radius":"3px"}})]}))],2):e._e()],2)],1)],1)},o=[],n=(i("14d9"),i("13d5"),i("2f62")),d={props:{dropdownData:{type:Object,required:!0},collection:{type:Object,required:!0},type:{type:String,require:!1}},components:{UserShareFormDropdownUi:()=>i.e("chunk-c47692ee").then(i.bind(null,"3ad5")),GroupShareFormDropdownUi:()=>i.e("chunk-fc456a64").then(i.bind(null,"d152"))},data(){return{search:"",searchedOptions:[],selectedOptions:[],selectedOptionsId:[],isSearchingOption:!1,isLoading:!1}},computed:{...Object(n["b"])(["user"]),filteredSearchedOptions(){var e;return null===(e=this.searchedOptions)||void 0===e?void 0:e.filter(e=>{var t;return!(null!==(t=this.selectedOptions)&&void 0!==t&&t.reduce((e,t)=>(e.push(t[this.dropdownData.id]),e),[]).includes(e[this.dropdownData.id]))})},filteredSelectedOptions(){let e=this.selectedOptions;return null===e||void 0===e?void 0:e.sort((e,t)=>this.selectedOptionsId.includes(null===e||void 0===e?void 0:e[this.dropdownData.id])&&!this.selectedOptionsId.includes(null===t||void 0===t?void 0:t[this.dropdownData.id])?-1:!this.selectedOptionsId.includes(null===e||void 0===e?void 0:e[this.dropdownData.id])&&this.selectedOptionsId.includes(null===t||void 0===t?void 0:t[this.dropdownData.id])?1:0)}},created(){this.getOptions()},methods:{async getOptions(){var e;this.isLoading=!0,await this.$axios.get(`${this.dropdownData.currentOptionUrl}${null===(e=this.collection)||void 0===e?void 0:e.id}`).then(e=>{var t;this.selectedOptions=Array.isArray(null===e||void 0===e?void 0:e.data)?null===e||void 0===e?void 0:e.data:[],this.selectedOptionsId=null===(t=this.selectedOptions)||void 0===t?void 0:t.reduce((e,t)=>(e.push(t[this.dropdownData.id]),e),[])}),this.isLoading=!1},async searchOption(e){try{if(this.searchedOptions=[],(null===e||void 0===e?void 0:e.length)<3)return;this.isSearchingOption=!0,await this.$axios.get(`${this.dropdownData.url}${e}`).then(e=>{"userShare"===this.type?this.searchedOptions=[...e.data.filter(e=>e.userID!==this.user.id)]:this.searchedOptions=[...e.data]})}finally{this.isSearchingOption=!1}},listHandler(e,t){const i=null===e||void 0===e?void 0:e[this.dropdownData.id];var s,o,n,d;if("removeOption"===t){if(this.selectedOptions=null===(s=this.selectedOptions)||void 0===s?void 0:s.filter(e=>e[this.dropdownData.id]!==i),null!==(o=this.selectedOptionsId)&&void 0!==o&&o.includes(i)){var a;let e=null===(a=this.selectedOptionsId)||void 0===a?void 0:a.indexOf(i);this.selectedOptionsId.splice(e,1)}}else null!==(n=this.selectedOptions)&&void 0!==n&&n.some(e=>e[this.dropdownData.id]===i)?null!==(d=this.selectedOptionsId)&&void 0!==d&&d.includes(i)?this.selectedOptionsId=this.selectedOptionsId.filter(e=>e!==i):this.selectedOptionsId.push(i):(this.selectedOptions.push(e),this.selectedOptionsId.push(i));this.filteredSearchedOptions.length||"clearSearch"!==t||(this.search="")}},watch:{search:{immediate:!0,handler(e){this.searchOption(e)}},selectedOptionsId:{immediate:!0,deep:!0,handler(e){this.$emit("change",e)}}}},a=d,r=(i("23c2"),i("2877")),l=Object(r["a"])(a,s,o,!1,null,null,null);t["default"]=l.exports}}]);