(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d0e2312"],{"81fd":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multiple-select-actions mt-1"},[t("div",{staticClass:"d-flex align-items-center"},[!("hideMoveButton"in e.componentData)&&e.$permissionHelper.checkPermission({permissionName:"bookmarkMultipleMove",collection:e.selectedCollection})?[e.showMoveToCollectionButton?t("div",{staticClass:"d-flex web-form__selected-collection mutiselect-move-collection cursor-pointer",on:{click:function(t){e.openCollectionSelectorModal=!0}}},[t("div",{staticClass:"collection-selector__collections__item__icon",domProps:{innerHTML:e._s(e.currentSelectedCollection.icon||e.$internalIcons.folder)}}),t("div",{staticClass:"collection-selector__collections__item__name"},[e._v(" "+e._s(e.currentSelectedCollection.name||"Select a collection")+" ")])]):e._e(),e.showMoveToCollectionButton?t("button",{staticClass:"btn-control md sq icon light",attrs:{disabled:!e.currentSelectedCollectionId},on:{click:function(t){return e.bulkAction("move")}}},[t("span",{domProps:{innerHTML:e._s(e.$internalIcons.checkmark)}})]):e._e(),e.showMoveToCollectionButton?t("button",{staticClass:"btn-control md sq icon light ml-0",on:{click:function(t){return e.toggleMoveToCollectionAction()}}},[t("span",{staticClass:"rotate-icon-45-deg",domProps:{innerHTML:e._s(e.$internalIcons.plusBold)}})]):e._e(),e.showMoveToCollectionButton?e._e():t("button",{staticClass:"btn-control md light",on:{click:function(t){return e.toggleMoveToCollectionAction()}}},[t("span",{domProps:{innerHTML:e._s(e.$internalIcons.move)}}),t("span",[e._v("Move")])])]:e._e(),"hideCopyButton"in e.componentData?e._e():t("button",{staticClass:"btn-control md light",on:{click:function(t){return e.$bus.$emit("copy-bookmark",e.selectedBookmarks)}}},[t("span",{domProps:{innerHTML:e._s(e.$internalIcons.copy)}}),t("span",[e._v("Copy")])]),"showRestoreButton"in e.componentData?t("button",{staticClass:"btn-control md light",on:{click:function(t){return e.bulkAction("restore")}}},[t("span",{domProps:{innerHTML:e._s(e.$internalIcons.restore)}}),t("span",[e._v("Restore")])]):e._e(),!("showRestoreButton"in e.componentData)&&e.$permissionHelper.checkPermission({permissionName:"bookmarkMultipleRemove",collection:e.selectedCollection})?t("button",{staticClass:"btn-control md light",on:{click:function(t){return e.bulkAction("delete")}}},[t("span",{domProps:{innerHTML:e._s(e.$internalIcons.trash)}}),t("span",[e._v("Remove")])]):e._e(),"showHardDeleteButton"in e.componentData?t("button",{staticClass:"btn-control md light",on:{click:function(t){return e.bulkAction("hardDelete")}}},[t("span",{domProps:{innerHTML:e._s(e.$internalIcons.trash)}}),t("span",[e._v("Remove")])]):e._e()],2),e.openCollectionSelectorModal?t("TmfCollectionSelector",{attrs:{selectedCollection:e.currentSelectedCollection,disableCollectionFetch:!0,openCollectionSelectorModal:e.openCollectionSelectorModal},on:{"update:selectedCollection":function(t){e.currentSelectedCollection=t},"update:selected-collection":function(t){e.currentSelectedCollection=t},selectedCollectionId:e.currentSelectedCollectionIdHandler,"update:openCollectionSelectorModal":function(t){e.openCollectionSelectorModal=t},"update:open-collection-selector-modal":function(t){e.openCollectionSelectorModal=t}}}):e._e()],1)},l=[],i=o("2f62"),s=o("ff46"),c={mixins:[s["a"]],props:{componentData:{type:Object,required:!1,default:()=>({})},parentcomponentData:{type:Object,required:!1,default:()=>({})},selectedBookmarks:{type:Array,required:!0}},components:{TmfCollectionSelector:()=>o.e("chunk-1af45181").then(o.bind(null,"dd87"))},data(){return{showMoveToCollectionButton:!1,currentSelectedCollectionId:null,currentSelectedCollection:{},openCollectionSelectorModal:!1}},computed:{...Object(i["b"])(["collections","selectedCollection"]),filteredCollection(){return this.collections.map(e=>(e.isOpen=!1,e))}},methods:{currentSelectedCollectionIdHandler(e){this.currentSelectedCollectionId=e},toggleMoveToCollectionAction(){this.showMoveToCollectionButton=!this.showMoveToCollectionButton},bulkAction(e){this.$bus.$emit("dialog-open",`Do you want to ${"hardDelete"===e?"permanently delete":e} selected Links?`),this.$bus.$on("dialog-success",t=>{t&&this.bulkActionApi(e),this.$bus.$off("dialog-success")})},async bulkActionApi(e){try{var t;let o="move"===e?this.currentSelectedCollectionId:0,n=(null===(t=this.selectedBookmarks)||void 0===t?void 0:t.length)>1;if("move"===e)await this.moveCopy({type:e,collection:this.currentSelectedCollection,collectionId:o,isMultiple:n,data:this.selectedBookmarks,draggedFrom:this.selectedCollection});else{this.$bus.$emit("open-toaster",""+(["delete","hardDelete"].includes(e)?"Removing Links...":"Restoring Links..."),"loader"),await this.$axios.post(`/bookmark/${o}/${e}/BulkAction`,JSON.stringify(this.selectedBookmarks)),await this.$store.dispatch("getCollections"),"allBookmarks"!==this.parentcomponentData.type&&this.$helper.setState("deleteMultiple",this.parentcomponentData.actions.mutation,this.parentcomponentData.actions.getter,this.selectedBookmarks,null,this.parentcomponentData.actions.mutationImage,this.parentcomponentData.actions.getterImage),"delete"===e&&this.$helper.setState("addMultiple","SET_TRASHED_BOOKMARKS","trashedBookmarks",this.selectedBookmarks,null,"SET_TRASHED_BOOKMARKS_IMAGES","trashedBookmarksImages");let t="delete"===e?"moved to trash":"restored from trash";"hardDelete"===e&&(t="deleted permanently"),this.$bus.$emit("open-toaster",`<b>${this.selectedBookmarks.length}</b> links ${t}.`,"success")}this.$emit("resetSelectedBookmarks")}catch(o){this.$bus.$emit("open-toaster","Error moving links","error")}finally{this.currentSelectedCollectionId=null,this.showMoveToCollectionButton=!1}}}},a=c,r=(o("8c72"),o("2877")),d=Object(r["a"])(a,n,l,!1,null,null,null);t["default"]=d.exports},"834b":function(e,t,o){"use strict";t["a"]={methods:{draggableToaster(e,t,o="copy"){const n=(null===e||void 0===e?void 0:e.length)||0,l=(null===t||void 0===t?void 0:t.length)||0,i=n>1,s=n-l,c="copy"===o?"copied":"moved";let a="",r="";i?0===s?(a=`${l} Links ${c} successfully`,r="success"):s>0&&0!==l?(a=`${l} Links ${c} successfully! \n              <small>Unable to ${o} ${s} \n              Link${s>1?"s":""}</small>`,r="success"):0===l&&(a=`Failed to ${o} Links. <small>Duplicate links detected</small>`,r="error"):1===l?(a=`${l} Link ${c} successfully`,r="success"):0===l&&(a=`Failed to ${o} Link. <small>Duplicate link detected</small>`,r="error"),this.$bus.$emit("open-toaster",a,r)}}}},"8c72":function(e,t,o){"use strict";o("aa15")},aa15:function(e,t,o){},ff46:function(e,t,o){"use strict";o("14d9"),o("13d5");var n=o("834b"),l=o("2f62");t["a"]={mixins:[n["a"]],computed:{...Object(l["b"])(["collectionBookmarks"])},methods:{async moveCopy({type:e,collection:t,isMultiple:o,data:n,draggedFrom:l}){try{var i;this.$bus.$emit("open-toaster",""+("move"===e?"Moving Links...":"Copying Links..."),"loader");let s=1,c=await this.$axios.post(`/bookmark/${t.id}/${e}/BulkAction`,JSON.stringify(n));o&&(s=n.length,this.$bus.$emit("reset-selected-bookmarks")),s=null===(i=c.data)||void 0===i?void 0:i.length,"move"===e&&this.moveCollection({isMultiple:o,data:n,bookmarkCount:s,draggedFrom:l,response:c}),t.bookmarkCount+=s,this.$collectionHelper.mapCollection({collection:t,componentData:this.$collectionHelper.getNavItemComponentData(t),type:"update"});let a=c.data;this.draggableToaster(n,a,e)}catch(s){this.$bus.$emit("open-toaster","move"===e?"Error moving Links":"Error copying Links","error"),406===s.status&&this.$bus.$emit("open-subscription-limit")}finally{this.$bus.$emit("reset-selected-bookmarks")}},moveCollection({isMultiple:e,data:t,bookmarkCount:o,draggedFrom:n,response:l}){t=t.reduce((e,t)=>{var o;return null!==(o=l.data)&&void 0!==o&&o.some(e=>e.id===t)&&e.push(t),e},[]);let i=this.collectionBookmarks.filter(o=>{var n;return e?!(null!==(n=t)&&void 0!==n&&n.includes(o.id)):t[0]!==o.id});n.bookmarkCount-=o,this.$collectionHelper.mapCollection({collection:n,componentData:this.$collectionHelper.getNavItemComponentData(n),type:"update"}),this.$store.commit("SET_COLLECTION_BOOKMARKS",i)}}}}}]);