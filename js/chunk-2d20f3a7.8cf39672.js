(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f3a7"],{b377:function(t,i,o){"use strict";o.r(i);var n=function(){var t=this,i=t._self._c;return i("div",{staticClass:"word-docs-links__link__actions"},[i("button",{staticClass:"btn-control sm sq icon green add--link",on:{click:function(i){return i.stopPropagation(),t.addBookmark.apply(null,arguments)}}},[i("span",{domProps:{innerHTML:t._s(t.$internalIcons.plusBold)}})]),i("button",{directives:[{name:"tmf-tooltip",rawName:"v-tmf-tooltip",value:{content:"View QR Code"},expression:"{\n      content: 'View QR Code'\n    }"}],staticClass:"btn-control sm icon light sq",on:{click:function(i){return t.$bus.$emit("open-qr-modal",t.link.path)}}},[i("span",{domProps:{innerHTML:t._s(t.$internalIcons.qrCode)}})]),i("button",{directives:[{name:"tmf-tooltip",rawName:"v-tmf-tooltip",value:{content:"Copy link"},expression:"{\n      content: 'Copy link'\n    }"}],staticClass:"btn-control sm sq icon light",on:{click:function(i){return i.stopPropagation(),t.copyBookmarkLink(t.link)}}},[i("span",{domProps:{innerHTML:t._s(t.$internalIcons.copy)}})])])},e=[],a=o("2f62"),l=o("e687"),s={mixins:[l["a"]],props:{link:{type:Object,require:!0}},data(){return{linkData:{},formData:{}}},computed:{...Object(a["b"])(["settings","collections","wordDocumentName"]),collectionId(){var t;return null===(t=this.settings)||void 0===t?void 0:t.defaultChromeCategory},isLinkDuplicate(){var t;return!(null===(t=this.linkData)||void 0===t||!t.isDublicate)},isDocumentNameAlreadySetAsCollection(){var t;return null===(t=this.collections)||void 0===t?void 0:t.some(t=>t.name===this.wordDocumentName)}},methods:{async addBookmark(){let t=!1,i={},o={withCategoryName:this.isDocumentNameAlreadySetAsCollection?"":this.wordDocumentName,createCollection:!0,collectionForWord:!0};try{var n;let l=await this.$axios.get("/category/search?query="+this.wordDocumentName);if((null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.length)>0){var e;let o=null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.filter(t=>null===t.parentID);t=!(null===o||void 0===o||!o.length),i=t?o[0]:{}}var a;if(t)o={withCollectionId:null===(a=i)||void 0===a?void 0:a.id}}finally{this.$bus.$emit("open-bookmark-form",{...this.link,...o})}},async fetchBookmarkData(){try{this.$bus.$emit("open-toaster","Checking for duplicate...","loader");let t=await this.$axios.post("/bookmark/fetch/"+this.collectionId,JSON.stringify(this.link.path));this.linkData={...null===t||void 0===t?void 0:t.data},this.isLinkDuplicate?this.duplicateLinkErrorMessage():(this.mapData(),this.saveLink())}catch(t){this.$bus.$emit("open-toaster","Error adding link","error")}},duplicateLinkErrorMessage(){var t;this.$emit("duplicateLink",null===(t=this.link)||void 0===t?void 0:t.path),this.$bus.$emit("open-toaster","Duplicate link detected","error")},mapData(){var t,i,o,n,e,a,l;this.formData={title:(null===(t=this.path)||void 0===t?void 0:t.title)||(null===(i=this.linkData)||void 0===i?void 0:i.title),path:null===(o=this.linkData)||void 0===o?void 0:o.path,type:this.$helper.checkForEmail(null===(n=this.linkData)||void 0===n?void 0:n.path)?4:1,icon:(null===(e=this.linkData)||void 0===e?void 0:e.icon)||this.$helper.getLinkIcon(null===(a=this.linkData)||void 0===a?void 0:a.path),description:null===(l=this.linkData)||void 0===l?void 0:l.description,categoryID:this.collectionId}},async saveLink(){try{var t,i;this.$bus.$emit("open-toaster","Saving Link...","loader"),await this.$axios.post("/bookmark",this.formData);let o=null===(t=this.collections)||void 0===t?void 0:t.map(({...t})=>(t.id==this.collectionId&&t.bookmarkCount++,t));this.$store.commit("SET_COLLECTION",o),this.$bus.$emit("open-toaster","Link saved successfully","success"),this.$emit("linksaved",null===(i=this.link)||void 0===i?void 0:i.path)}catch(o){409===o.status?this.duplicateLinkErrorMessage():this.$bus.$emit("open-toaster","Error Saving link","error")}}}},r=s,c=o("2877"),d=Object(c["a"])(r,n,e,!1,null,null,null);i["default"]=d.exports}}]);