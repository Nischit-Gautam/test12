(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63aed695"],{7271:function(t,e,n){},9347:function(t,e,n){"use strict";n("7271")},db6d:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"tmf-click-outside",rawName:"v-tmf-click-outside",value:t.closeDropdown,expression:"closeDropdown"}],staticClass:"tmf-dropdown-linkPrevue"},[t.hasHeader?e("div",{ref:"dropdownHeader",staticClass:"tmf-dropdown__header",attrs:{id:t.trackerId},on:{click:function(e){return e.stopPropagation(),t.openDropdown.apply(null,arguments)}}},[t._t("header")],2):t._e(),e("transition",{attrs:{name:"fade"}},[t.isOpen?e("div",{key:t.dropdownComponentKey,staticClass:"tmf-dropdown-linkPrevue__menu",style:{top:"40px",right:"40px",minHeight:t.response&&t.validUrl?"":"200px"}},[e("transition",{attrs:{name:"fade"}},[!t.response&&t.validUrl?e("div",{staticClass:"spinner"}):t._e(),t.response?e("div",[e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-img"},[null!==t.response.image?e("img",{attrs:{src:t.response.image}}):e("div",{staticClass:"link-no-content d-flex flex-column align-items-center justify-content-center"},[e("span",{staticClass:"mb-1"},[e("img",{attrs:{src:t.nocontent,alt:"no content"}})]),e("h6",{staticStyle:{color:"#777474"}},[t._v("Content not found.")])])]),e("div",{staticClass:"card-info"},[e("div",{staticClass:"card-text"},[e("h6",[t._v(t._s(t.response.title))]),e("p",[t._v(t._s(t.response.description))])]),e("div",{staticClass:"card-btn"},[t.showButton?e("button",{staticClass:"btn-control md primary",on:{click:t.viewMore}},[t._v(" View More ")]):t._e()])])])]):t._e()])],1):t._e()])],1)},s=[];let i=n("3a2d");var r={props:{menuPosition:{Type:String,required:!1,default:"bottom-left"},dropdownComponentKey:{type:Number,required:!1,default:0},trackerId:{type:String,required:!1,default:""},url:{type:String,default:""},cardWidth:{type:String,default:"400px"},onButtonClick:{type:Function,default:void 0},showButton:{type:Boolean,default:!0},apiUrl:{type:String,default:"https://link-preview-api.nivaldo.workers.dev/preview"}},created(){this.getLinkPreview()},data(){return{isOpen:!1,position:{},response:null,validUrl:!1,nocontent:i}},computed:{hasHeader(){return!!this.$slots["header"]}},methods:{closeAllDropdowns(){let t=document.querySelectorAll(".tmf-dropdown-linkPrevue");t.forEach(t=>{const e=t.__vue__;e!==this&&e.closeDropdown()});let e=document.querySelectorAll(".tmf-dropdown");e.forEach(t=>{const e=t.__vue__;e!==this&&e.closeDropdown()})},closeDropdown(){this.isOpen=!1},openDropdown(){this.closeAllDropdowns();let t=this.$refs.dropdownHeader,e=t.getBoundingClientRect();this.position={top:e.bottom+window.scrollY,left:e.left+window.scrollX},this.isOpen=!this.isOpen},viewMore:function(){if(void 0!==this.onButtonClick)this.onButtonClick(this.response);else{const t=window.open(this.url,"_blank");this.closeDropdown(),t.focus()}},isValidUrl:function(t){const e=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/;return this.validUrl=e.test(t),this.validUrl},getLinkPreview:function(){this.isValidUrl(this.url)&&this.httpRequest(t=>{this.response=t},()=>{this.response=null,this.validUrl=!1})},httpRequest:function(t,e){fetch(`${this.apiUrl}?url=${this.url}`,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE","Access-Control-Allow-Headers":"*","Content-Type":"application/json"}}).then(t=>t.json()).then(e=>t(e)).catch(()=>e())}},watch:{dropdownComponentKey:{immediate:!0,handler(t){t>1&&(this.isOpen=!0)}},url:function(){this.response=null,this.getLinkPreview()}}},l=r,a=(n("9347"),n("2877")),d=Object(a["a"])(l,o,s,!1,null,null,null);e["default"]=d.exports}}]);